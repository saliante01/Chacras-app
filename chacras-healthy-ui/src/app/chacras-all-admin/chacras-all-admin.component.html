<div class="page-title">
    <h1>Todas las Chacras</h1>
    <button (click)="startCreating()" class="btn-create">Crear una nueva chacra</button>
  </div>
  
  <div *ngIf="chacras.length === 0" class="loading">
    <p>No hay chacras registradas o están cargando...</p>
  </div>
  
  <div *ngIf="chacras.length > 0" class="chacras-list">
    <div *ngFor="let chacra of chacras" class="chacra-card">
      <h2>{{ chacra.title }}</h2>
      <p><strong>Descripción:</strong> {{ chacra.description }}</p>
      <p><strong>Horario de atención:</strong> {{ chacra.openingHours }}</p>
      <button (click)="deleteChacra(chacra.id)" class="btn-delete">Eliminar</button>
      <button (click)="startEditing(chacra)" class="btn-edit">Editar</button>
    </div>
  </div>
  
  <!-- Formulario para editar chacra -->
  <div *ngIf="editingChacra" class="overlay">
    <div class="modal">
      <h2>Editar Chacra</h2>
      <form (ngSubmit)="saveChacra()">
        <div class="form-group">
          <label for="title">Título</label>
          <input type="text" id="title" [(ngModel)]="editedData.title" name="title" required />
        </div>
  
        <div class="form-group">
          <label for="description">Descripción</label>
          <textarea id="description" [(ngModel)]="editedData.description" name="description" required></textarea>
        </div>
  
        <div class="form-group">
          <label>Horario de Apertura</label>
          <div class="time-select">
            <select [(ngModel)]="editedData.openingTime.hour" name="openingHour" required>
              <option *ngFor="let hour of hours" [value]="hour">{{ hour }}</option>
            </select>
            :
            <select [(ngModel)]="editedData.openingTime.minute" name="openingMinute" required>
              <option *ngFor="let minute of minutes" [value]="minute">{{ minute }}</option>
            </select>
            <select [(ngModel)]="editedData.openingTime.period" name="openingPeriod" required>
              <option *ngFor="let period of periods" [value]="period">{{ period }}</option>
            </select>
          </div>
        </div>
  
        <div class="form-group">
          <label>Horario de Cierre</label>
          <div class="time-select">
            <select [(ngModel)]="editedData.closingTime.hour" name="closingHour" required>
              <option *ngFor="let hour of hours" [value]="hour">{{ hour }}</option>
            </select>
            :
            <select [(ngModel)]="editedData.closingTime.minute" name="closingMinute" required>
              <option *ngFor="let minute of minutes" [value]="minute">{{ minute }}</option>
            </select>
            <select [(ngModel)]="editedData.closingTime.period" name="closingPeriod" required>
              <option *ngFor="let period of periods" [value]="period">{{ period }}</option>
            </select>
          </div>
        </div>
  
        <div class="form-actions">
          <button type="submit" class="btn-submit">Guardar</button>
          <button type="button" (click)="cancelEditing()" class="btn-cancel">Cancelar</button>
        </div>
      </form>
    </div>
  </div>
  
  <!-- Formulario para crear chacra -->
  <div *ngIf="creatingChacra" class="overlay">
    <div class="modal">
      <h2>Crear Nueva Chacra</h2>
      <form (ngSubmit)="saveNewChacra()">
        <div class="form-group">
          <label for="title">Título</label>
          <input type="text" id="title" [(ngModel)]="newChacra.title" name="title" required />
        </div>
  
        <div class="form-group">
          <label for="description">Descripción</label>
          <textarea id="description" [(ngModel)]="newChacra.description" name="description" required></textarea>
        </div>
  
        <div class="form-group">
          <label>Horario de Apertura</label>
          <div class="time-select">
            <select [(ngModel)]="newChacra.openingTime.hour" name="openingHour" required>
              <option *ngFor="let hour of hours" [value]="hour">{{ hour }}</option>
            </select>
            :
            <select [(ngModel)]="newChacra.openingTime.minute" name="openingMinute" required>
              <option *ngFor="let minute of minutes" [value]="minute">{{ minute }}</option>
            </select>
            <select [(ngModel)]="newChacra.openingTime.period" name="openingPeriod" required>
              <option *ngFor="let period of periods" [value]="period">{{ period }}</option>
            </select>
          </div>
        </div>
  
        <div class="form-group">
          <label>Horario de Cierre</label>
          <div class="time-select">
            <select [(ngModel)]="newChacra.closingTime.hour" name="closingHour" required>
              <option *ngFor="let hour of hours" [value]="hour">{{ hour }}</option>
            </select>
            :
            <select [(ngModel)]="newChacra.closingTime.minute" name="closingMinute" required>
              <option *ngFor="let minute of minutes" [value]="minute">{{ minute }}</option>
            </select>
            <select [(ngModel)]="newChacra.closingTime.period" name="closingPeriod" required>
              <option *ngFor="let period of periods" [value]="period">{{ period }}</option>
            </select>
          </div>
        </div>
  
        <div class="form-group">
          <label for="userId">ID del Usuario</label>
          <input type="number" id="userId" [(ngModel)]="newChacra.userId" name="userId" required />
        </div>
  
        <div class="form-actions">
          <button type="submit" class="btn-submit">Guardar</button>
          <button type="button" (click)="cancelCreating()" class="btn-cancel">Cancelar</button>
        </div>
      </form>
    </div>
  </div>
  